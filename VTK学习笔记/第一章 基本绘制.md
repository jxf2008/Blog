## 基本模型的绘制

对于VTK学习的第一步，是进行最基本的一些模型的绘制，通过这些了解VTK是如何工作的。首先是一段生成圆形的代码
```c++
int main(int, char* []){
	vtkNew<vtkNamedColors> colors;

	// Create a circle
	vtkNew<vtkRegularPolygonSource> polygonSource;
	polygonSource->GeneratePolygonOff();
	polygonSource->SetNumberOfSides(50);
	polygonSource->SetRadius(5);
	polygonSource->SetCenter(0, 0, 0);

	// Visualize
	vtkNew<vtkPolyDataMapper> mapper;
	mapper->SetInputConnection(polygonSource->GetOutputPort());

	vtkNew<vtkActor> actor;
	actor->SetMapper(mapper);

	vtkNew<vtkRenderer> renderer;
	renderer->AddActor(actor);
	renderer->SetBackground(colors->GetColor3d("DarkGreen").GetData());

	vtkNew<vtkRenderWindow> renderWindow;
	renderWindow->AddRenderer(renderer);

	vtkNew<vtkRenderWindowInteractor> renderWindowInteractor;
	renderWindowInteractor->SetRenderWindow(renderWindow);

	renderWindow->SetWindowName("Circle");
	renderWindow->Render();
	renderWindowInteractor->Start();

	return EXIT_SUCCESS;
}
```

上面这段代码复制自VTK的官方示例，这段代码大致可以分为两个部分，创建圆形模型和显示。VTK和很多C++的第三方类库一样，使用了自己设计的内存管理方式，以避免用户使用C++原生的new和delete。vtkNew类就是内存管理的核心，大多数VTK的对象都可以使用vtkNew类生成而不用考虑释放内存，这些申请和释放内存的工作有vtkNew来自动完成，可以将vtkNew类理解为VTK为自己的类设计的一个专有的智能指针。

vtkRegularPolygonSource类用于提供多边形相关的功能，GeneratePolygonOff()函数用于设置该模型多边形还是一个多边框，可以注释掉该函数看下区别。比较有趣的是SetNumberOfSides()函数，如果不调用该函数，那多边形的默认值是6，下面是效果对比图，从对比图可以看出，VTK把圆形当场一个多边形来处理，只不过这个多边形的边比较多。

![](https://jxf2008-1302581379.cos.ap-nanjing.myqcloud.com/github_blog/VTK1-1.png)

注释掉SetNumberOfSides()后，默认边数为6
![](https://jxf2008-1302581379.cos.ap-nanjing.myqcloud.com/github_blog/VTK1-2.png)

示例代码的另一个部分是显示相关的代码，这里使用了VTK自带的界面相关的类，通常来说，在实际使用中，一般不会使用VTK的界面功能（稍后会介绍如何在Qt中使用VTK），因为VTK是专精三维模型而不是GUI界面。这里简单的介绍下窗体界面，在介绍Qt和VTK混合编程前，会暂时跳过窗体相关的代码，因为这部分代码大多数是一样的。
